<div class="file-upload">
  <div
    class="file-upload__drop-area"
    [class.file-upload__drop-area--dragover]="isDragOver"
    (click)="triggerFileInput()"
    (dragover)="onDragOver($event)"
    (dragleave)="onDragLeave($event)"
    (drop)="onDrop($event)"
  >
    <div class="file-upload__content">
      <div class="file-upload__icon">
        <svg width="48" height="48" viewBox="0 0 24 24" fill="none">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"
                stroke="currentColor" stroke-width="2"/>
          <polyline points="14,2 14,8 20,8"
                    stroke="currentColor" stroke-width="2"/>
          <line x1="16" y1="13" x2="8" y2="13"
                stroke="currentColor" stroke-width="2"/>
          <line x1="16" y1="17" x2="8" y2="17"
                stroke="currentColor" stroke-width="2"/>
          <polyline points="10,9 9,9 8,9"
                    stroke="currentColor" stroke-width="2"/>
        </svg>
      </div>

      <h3 class="file-upload__title">
        {{ isDragOver ? 'Отпустите файл здесь' : 'Перетащите файл сюда' }}
      </h3>

      <p class="file-upload__subtitle">
        или <span class="file-upload__browse">выберите на компьютере</span>
      </p>

      <p class="file-upload__hint">
        Максимальный размер: 20MB. Форматы: JPG, PDF, ODF, ODT, HTML
      </p>
    </div>

    <input
      #fileInput
      id="fileInput"
      type="file"
      class="file-upload__input"
      (change)="onFileSelected($event)"
      accept=".pdf,.docx,.odf,.odt,.png,.jpg,.html"
    />
  </div>

  @if (validationErrors.length > 0) {
    <div class="file-upload__errors">
      <h4 class="file-upload__errors-title">Ошибки загрузки:</h4>
      <ul class="file-upload__errors-list">
        @for (error of validationErrors; track error) {
          <li class="file-upload__error-item">
            {{ error }}
          </li>
        }
      </ul>
    </div>
  }

  @if (uploadedFile) {
    <div class="file-upload__files">
      <div class="file-upload__files-header">
        <span class="file-upload__files-count">Файл выбран</span>
        <span class="file-upload__files-size">{{ formatFileSize(uploadedFile.file.size) }}</span>
      </div>

      <div class="file-upload__files-list">
        <div class="file-upload__file-item">
          <div class="file-upload__file-info">
            <span class="file-upload__file-name">{{ uploadedFile.file.name }}</span>
            <span class="file-upload__file-size">{{ formatFileSize(uploadedFile.file.size) }}</span>
          </div>
          <button
            type="button"
            class="input__clear"
            (click)="removeFile()"
            title="Удалить файл"
          >
            <div class="input__cross"></div>
          </button>
        </div>
      </div>
    </div>
  }
</div>
